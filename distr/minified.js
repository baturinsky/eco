{let r="\u{1F33F},\u{1F344},\u{1F41E},\u{1F40D},\u{1F9A1},\u{1F43B}".split(",");const y=(e=1)=>Math.random()*e;let l=[];const o=(e,t)=>{let p={type:e.type,x:e.x+y(2*t)-t,y:e.y+y(2*t)-t,hp:30};n(p)>500||(e.hp-=40,l.push(p))},n=e=>(e.x**2+e.y**2)**.5,s=(e,t)=>({x:t.x-e.x,y:t.y-e.y});document.write('<canvas id="C"/></canvas>'),C.width=1e3,C.height=1e3;const i=C.getContext("2d");let h;C.onmousemove=e=>h=e,window.onkeydown=e=>o({type:e.key-1,x:h.offsetX-505,y:h.offsetY-500},0);let x=()=>{y(5)<1&&o({type:~~(y()**3*6),x:0,y:0},100),i.clearRect(0,0,1e3,1e3);for(let e in r)for(let t of l)t.type==e&&(i.fillStyle=`rgba(0,0,0,${t.hp/100+.3})`,i.font=`${t.type<2?20:8+6*t.type}px Arial`,i.fillText(r[t.type],t.x+500,t.y+500));for(let e of l){if(e.hp>70&&(l.length<1e3||e.type>1)&&o(e,e.type>2?0:100),e.type>1||y(10)<1)for(let t of l){let p=n(s(e,t));if(e!=t&&p<y(100)){let f=e.type-t.type;f==0&&p<10&&e.type<2&&(e.hp-=10),e.prey?e.prey.hp<=0&&delete e.prey:(f==2||(f==1||f==3)&&e.type>1&&y()<.1)&&(e.prey=t)}}if(e.prey){let t=e.prey;if(t.hp<=0)e.prey=null;else{let p=s(e,t),f=n(p);if(f<5)e.hp+=50,t.hp=-100;else{let c=(e.type+1)/f;e.x+=p.x*c,e.y+=p.y*c}}}e.hp+=e.type<2?1:-1,e.hp>150&&(e.hp=150),y(1e6)/l.length<1&&(e.hp=-100)}l=l.filter(e=>e.hp>0),setTimeout(x,50)};x()}
